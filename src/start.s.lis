1     0000              MODULE start_s
2     0000              LINE 0, "src/start.s"
0     0000              
1     0000              INCLUDE "config_scz180_public.inc"
1     0000              
2     0000              
3     0000              
4     0000              
5     0000              IFNDEF __CONFIG_Z88DK_INC_
6     0000              defc   __CONFIG_Z88DK_INC_ = 1
7     0000              
8     0000              ; Automatically Generated at Library Build Time
9     0000              
10    0000              
11    0000              
12    0000              
13    0000              
14    0000              
15    0000              
16    0000              
17    0000              
18    0000              
19    0000              PUBLIC __Z88DK
20    0000              
21    0000              
22    0000              
23    0000              
24    0000              defc __Z88DK = 1992
25    0000              
26    0000              
27    0000              
28    0000              
29    0000              
30    0000              
31    0000              
32    0000              
33    0000              
34    0000              PUBLIC __SCZ180
35    0000              
36    0000              PUBLIC __CPU_CLOCK
37    0000              
38    0000              PUBLIC __CLOCKS_PER_SECOND
39    0000              
40    0000              PUBLIC __ASCI0_RX_SIZE
41    0000              PUBLIC __ASCI0_TX_SIZE
42    0000              
43    0000              PUBLIC __ASCI1_RX_SIZE
44    0000              PUBLIC __ASCI1_TX_SIZE
45    0000              
46    0000              PUBLIC __IO_BASE_ADDRESS
47    0000              
48    0000              PUBLIC __IO_DIO_PORT
49    0000              
50    0000              PUBLIC __IO_SYSTEM
51    0000              PUBLIC __IO_LED_OUTPUT
52    0000              PUBLIC __IO_LED_STATUS
53    0000              
54    0000              PUBLIC __IO_CF_PORT
55    0000              
56    0000              
57    0000              
58    0000              
59    0000              defc __SCZ180 = 1
60    0000              
61    0000              defc __CPU_CLOCK = 18432000
62    0000              
63    0000              defc __CLOCKS_PER_SECOND = 50
64    0000              
65    0000              defc __ASCI0_RX_SIZE = 0x100
66    0000              defc __ASCI0_TX_SIZE = 0x080
67    0000              
68    0000              defc __ASCI1_RX_SIZE = 0x100
69    0000              defc __ASCI1_TX_SIZE = 0x080
70    0000              
71    0000              defc __IO_BASE_ADDRESS = 0xc0
72    0000              
73    0000              defc __IO_DIO_PORT = 0x00
74    0000              
75    0000              defc __IO_SYSTEM = 0x0C
76    0000              defc __IO_LED_OUTPUT = 0x0D
77    0000              defc __IO_LED_STATUS = 0x0E
78    0000              
79    0000              defc __IO_CF_PORT = 0x10
80    0000              
81    0000              
82    0000              
83    0000              
84    0000              
85    0000              
86    0000              
87    0000              
88    0000              
89    0000              PUBLIC __Z180
90    0000              
91    0000              PUBLIC __Z180_Z80180
92    0000              PUBLIC __Z180_Z8L180
93    0000              PUBLIC __Z180_Z8S180
94    0000              
95    0000              PUBLIC __CPU_INFO
96    0000              
97    0000              PUBLIC __CPU_INFO_ENABLE_SLL
98    0000              
99    0000              PUBLIC __CPU_TIMER_SCALE
100   0000              
101   0000              
102   0000                 ; Z8S180 / Z8L180 CLASS
103   0000              
104   0000                 PUBLIC CNTLA0
105   0000                 PUBLIC CNTLA1
106   0000                 PUBLIC CNTLB0
107   0000                 PUBLIC CNTLB1
108   0000                 PUBLIC STAT0
109   0000                 PUBLIC STAT1
110   0000                 PUBLIC TDR0
111   0000                 PUBLIC TDR1
112   0000                 PUBLIC RDR0
113   0000                 PUBLIC RDR1
114   0000                 PUBLIC ASEXT0
115   0000                 PUBLIC ASEXT1
116   0000                 PUBLIC ASTC0L
117   0000                 PUBLIC ASTC0H
118   0000                 PUBLIC ASTC1L
119   0000                 PUBLIC ASTC1H
120   0000              
121   0000                 PUBLIC CNTR
122   0000                 PUBLIC TRDR
123   0000              
124   0000                 PUBLIC TMDR0L
125   0000                 PUBLIC TMDR0H
126   0000                 PUBLIC RLDR0L
127   0000                 PUBLIC RLDR0H
128   0000                 PUBLIC TCR
129   0000                 PUBLIC TMDR1L
130   0000                 PUBLIC TMDR1H
131   0000                 PUBLIC RLDR1L
132   0000                 PUBLIC RLDR1H
133   0000              
134   0000                 PUBLIC FRC
135   0000                 PUBLIC CMR
136   0000                 PUBLIC CCR
137   0000              
138   0000                 PUBLIC SAR0L
139   0000                 PUBLIC SAR0H
140   0000                 PUBLIC SAR0B
141   0000                 PUBLIC DAR0L
142   0000                 PUBLIC DAR0H
143   0000                 PUBLIC DAR0B
144   0000                 PUBLIC BCR0L
145   0000                 PUBLIC BCR0H
146   0000                 PUBLIC MAR1L
147   0000                 PUBLIC MAR1H
148   0000                 PUBLIC MAR1B
149   0000                 PUBLIC IAR1L
150   0000                 PUBLIC IAR1H
151   0000                 PUBLIC IAR1B
152   0000                 PUBLIC BCR1L
153   0000                 PUBLIC BCR1H
154   0000                 PUBLIC DSTAT
155   0000                 PUBLIC DMODE
156   0000                 PUBLIC DCNTL
157   0000              
158   0000                 PUBLIC IL
159   0000                 PUBLIC ITC
160   0000              
161   0000                 PUBLIC RCR
162   0000              
163   0000                 PUBLIC CBR
164   0000                 PUBLIC BBR
165   0000                 PUBLIC CBAR
166   0000              
167   0000                 PUBLIC OMCR
168   0000                 PUBLIC ICR
169   0000              
170   0000                 ; I/O REGISTER BIT FIELDS
171   0000              
172   0000                 PUBLIC CNTLA0_MPE
173   0000                 PUBLIC CNTLA0_RE
174   0000                 PUBLIC CNTLA0_TE
175   0000                 PUBLIC CNTLA0_RTS0
176   0000                 PUBLIC CNTLA0_MPBR
177   0000                 PUBLIC CNTLA0_EFR
178   0000                 PUBLIC CNTLA0_MODE_MASK
179   0000                 PUBLIC CNTLA0_MODE_8P2
180   0000                 PUBLIC CNTLA0_MODE_8P1
181   0000                 PUBLIC CNTLA0_MODE_8N2
182   0000                 PUBLIC CNTLA0_MODE_8N1
183   0000                 PUBLIC CNTLA0_MODE_7P2
184   0000                 PUBLIC CNTLA0_MODE_7P1
185   0000                 PUBLIC CNTLA0_MODE_7N2
186   0000                 PUBLIC CNTLA0_MODE_7N1
187   0000              
188   0000                 PUBLIC CNTLA1_MPE
189   0000                 PUBLIC CNTLA1_RE
190   0000                 PUBLIC CNTLA1_TE
191   0000                 PUBLIC CNTLA1_CKA1D
192   0000                 PUBLIC CNTLA1_MPBR
193   0000                 PUBLIC CNTLA1_EFR
194   0000                 PUBLIC CNTLA1_MODE_MASK
195   0000                 PUBLIC CNTLA1_MODE_8P2
196   0000                 PUBLIC CNTLA1_MODE_8P1
197   0000                 PUBLIC CNTLA1_MODE_8N2
198   0000                 PUBLIC CNTLA1_MODE_8N1
199   0000                 PUBLIC CNTLA1_MODE_7P2
200   0000                 PUBLIC CNTLA1_MODE_7P1
201   0000                 PUBLIC CNTLA1_MODE_7N2
202   0000                 PUBLIC CNTLA1_MODE_7N1
203   0000              
204   0000                 PUBLIC CNTLB0_MPBT
205   0000                 PUBLIC CNTLB0_MP
206   0000                 PUBLIC CNTLB0_CTS
207   0000                 PUBLIC CNTLB0_PS
208   0000                 PUBLIC CNTLB0_PEO
209   0000                 PUBLIC CNTLB0_DR
210   0000                 PUBLIC CNTLB0_SS_MASK
211   0000                 PUBLIC CNTLB0_SS_EXT
212   0000                 PUBLIC CNTLB0_SS_DIV_64
213   0000                 PUBLIC CNTLB0_SS_DIV_32
214   0000                 PUBLIC CNTLB0_SS_DIV_16
215   0000                 PUBLIC CNTLB0_SS_DIV_8
216   0000                 PUBLIC CNTLB0_SS_DIV_4
217   0000                 PUBLIC CNTLB0_SS_DIV_2
218   0000                 PUBLIC CNTLB0_SS_DIV_1
219   0000              
220   0000                 PUBLIC CNTLB1_MPBT
221   0000                 PUBLIC CNTLB1_MP
222   0000                 PUBLIC CNTLB1_CTS
223   0000                 PUBLIC CNTLB1_PS
224   0000                 PUBLIC CNTLB1_PEO
225   0000                 PUBLIC CNTLB1_DR
226   0000                 PUBLIC CNTLB1_SS_MASK
227   0000                 PUBLIC CNTLB1_SS_EXT
228   0000                 PUBLIC CNTLB1_SS_DIV_64
229   0000                 PUBLIC CNTLB1_SS_DIV_32
230   0000                 PUBLIC CNTLB1_SS_DIV_16
231   0000                 PUBLIC CNTLB1_SS_DIV_8
232   0000                 PUBLIC CNTLB1_SS_DIV_4
233   0000                 PUBLIC CNTLB1_SS_DIV_2
234   0000                 PUBLIC CNTLB1_SS_DIV_1
235   0000              
236   0000                 PUBLIC STAT0_RDRF
237   0000                 PUBLIC STAT0_OVRN
238   0000                 PUBLIC STAT0_PE
239   0000                 PUBLIC STAT0_FE
240   0000                 PUBLIC STAT0_RIE
241   0000                 PUBLIC STAT0_DCD0
242   0000                 PUBLIC STAT0_TDRE
243   0000                 PUBLIC STAT0_TIE
244   0000              
245   0000                 PUBLIC STAT1_RDRF
246   0000                 PUBLIC STAT1_OVRN
247   0000                 PUBLIC STAT1_PE
248   0000                 PUBLIC STAT1_FE
249   0000                 PUBLIC STAT1_RIE
250   0000                 PUBLIC STAT1_CTS1E
251   0000                 PUBLIC STAT1_TDRE
252   0000                 PUBLIC STAT1_TIE
253   0000              
254   0000                 PUBLIC CNTR_EF
255   0000                 PUBLIC CNTR_EIE
256   0000                 PUBLIC CNTR_RE
257   0000                 PUBLIC CNTR_TE
258   0000                 PUBLIC CNTR_SS_MASK
259   0000                 PUBLIC CNTR_SS_EXT
260   0000                 PUBLIC CNTR_SS_DIV_1280
261   0000                 PUBLIC CNTR_SS_DIV_640
262   0000                 PUBLIC CNTR_SS_DIV_320
263   0000                 PUBLIC CNTR_SS_DIV_160
264   0000                 PUBLIC CNTR_SS_DIV_80
265   0000                 PUBLIC CNTR_SS_DIV_40
266   0000                 PUBLIC CNTR_SS_DIV_20
267   0000              
268   0000                 ; PRT REGISTER BIT FIELDS
269   0000              
270   0000                 PUBLIC TCR_TIF1
271   0000                 PUBLIC TCR_TIF0
272   0000                 PUBLIC TCR_TIE1
273   0000                 PUBLIC TCR_TIE0
274   0000                 PUBLIC TCR_TOC1
275   0000                 PUBLIC TCR_TOC0
276   0000                 PUBLIC TCR_TDE1
277   0000                 PUBLIC TCR_TDE0
278   0000              
279   0000                 ; DMA REGISTER BIT FIELDS
280   0000              
281   0000                 PUBLIC DCNTL_MWI1
282   0000                 PUBLIC DCNTL_MWI0
283   0000                 PUBLIC DCNTL_IWI1
284   0000                 PUBLIC DCNTL_IWI0
285   0000                 PUBLIC DCNTL_DMS1
286   0000                 PUBLIC DCNTL_DMS0
287   0000                 PUBLIC DCNTL_DIM1
288   0000                 PUBLIC DCNTL_DIM0
289   0000              
290   0000                 ; INT/TRAP CONTROL REGISTER (ITC) BIT FIELDS
291   0000              
292   0000                 PUBLIC ITC_TRAP
293   0000                 PUBLIC ITC_UFO
294   0000                 PUBLIC ITC_ITE2
295   0000                 PUBLIC ITC_ITE1
296   0000                 PUBLIC ITC_ITE0
297   0000              
298   0000                 ; Refresh CONTROL REGISTER (RCR) BIT FIELDS
299   0000              
300   0000                 PUBLIC RCR_REFE
301   0000                 PUBLIC RCR_REFW
302   0000                 PUBLIC RCR_CYC1
303   0000                 PUBLIC RCR_CYC0
304   0000              
305   0000                 ; Operation Mode CONTROL REGISTER (OMCR) BIT FIELDS
306   0000              
307   0000                 PUBLIC OMCR_M1E
308   0000                 PUBLIC OMCR_M1TE
309   0000                 PUBLIC OMCR_IOC
310   0000              
311   0000                 ; CPU CLOCK MULTIPLIER REGISTER (CMR) BIT FIELDS (Z8S180 & higher Only)
312   0000              
313   0000                 PUBLIC CMR_X2
314   0000                 PUBLIC CMR_LN_XTAL
315   0000              
316   0000                 ; CPU CONTROL REGISTER (CCR) BIT FIELDS (Z8S180 & higher Only)
317   0000              
318   0000                 PUBLIC CCR_XTAL_X2
319   0000                 PUBLIC CCR_STANDBY
320   0000                 PUBLIC CCR_BREXT
321   0000                 PUBLIC CCR_LNPHI
322   0000                 PUBLIC CCR_IDLE
323   0000                 PUBLIC CCR_LNIO
324   0000                 PUBLIC CCR_LNCPUCTL
325   0000                 PUBLIC CCR_LNAD
326   0000              
327   0000              
328   0000              
329   0000              
330   0000              
331   0000              defc __Z180 = 0x04
332   0000              
333   0000              defc __Z180_Z80180 = 0x01
334   0000              defc __Z180_Z8L180 = 0x02
335   0000              defc __Z180_Z8S180 = 0x04
336   0000              
337   0000              defc __CPU_INFO = 0x00
338   0000              
339   0000              defc __CPU_INFO_ENABLE_SLL = 0x01
340   0000              
341   0000              defc __CPU_TIMER_SCALE = 20
342   0000              
343   0000              
344   0000                 ; Z8S180 / Z8L180 CLASS
345   0000              
346   0000                 defc CNTLA0 = 0xc0
347   0000                 defc CNTLA1 = 0xc1
348   0000                 defc CNTLB0 = 0xc2
349   0000                 defc CNTLB1 = 0xc3
350   0000                 defc STAT0 = 0xc4
351   0000                 defc STAT1 = 0xc5
352   0000                 defc TDR0 = 0xc6
353   0000                 defc TDR1 = 0xc7
354   0000                 defc RDR0 = 0xc8
355   0000                 defc RDR1 = 0xc9
356   0000                 defc ASEXT0 = 0xd2
357   0000                 defc ASEXT1 = 0xd3
358   0000                 defc ASTC0L = 0xda
359   0000                 defc ASTC0H = 0xdb
360   0000                 defc ASTC1L = 0xdc
361   0000                 defc ASTC1H = 0xdd
362   0000              
363   0000                 defc CNTR = 0xca
364   0000                 defc TRDR = 0xcb
365   0000              
366   0000                 defc TMDR0L = 0xcc
367   0000                 defc TMDR0H = 0xcd
368   0000                 defc RLDR0L = 0xce
369   0000                 defc RLDR0H = 0xcf
370   0000                 defc TCR = 0xd0
371   0000                 defc TMDR1L = 0xd4
372   0000                 defc TMDR1H = 0xd5
373   0000                 defc RLDR1L = 0xd6
374   0000                 defc RLDR1H = 0xd7
375   0000              
376   0000                 defc FRC = 0xd8
377   0000                 defc CMR = 0xde
378   0000                 defc CCR = 0xdf
379   0000              
380   0000                 defc SAR0L = 0xe0
381   0000                 defc SAR0H = 0xe1
382   0000                 defc SAR0B = 0xe2
383   0000                 defc DAR0L = 0xe3
384   0000                 defc DAR0H = 0xe4
385   0000                 defc DAR0B = 0xe5
386   0000                 defc BCR0L = 0xe6
387   0000                 defc BCR0H = 0xe7
388   0000                 defc MAR1L = 0xe8
389   0000                 defc MAR1H = 0xe9
390   0000                 defc MAR1B = 0xea
391   0000                 defc IAR1L = 0xeb
392   0000                 defc IAR1H = 0xec
393   0000                 defc IAR1B = 0xed
394   0000                 defc BCR1L = 0xee
395   0000                 defc BCR1H = 0xef
396   0000                 defc DSTAT = 0xf0
397   0000                 defc DMODE = 0xf1
398   0000                 defc DCNTL = 0xf2
399   0000              
400   0000                 defc IL = 0xf3
401   0000                 defc ITC = 0xf4
402   0000              
403   0000                 defc RCR = 0xf6
404   0000              
405   0000                 defc CBR = 0xf8
406   0000                 defc BBR = 0xf9
407   0000                 defc CBAR = 0xfa
408   0000              
409   0000                 defc OMCR = 0xfe
410   0000                 defc ICR = 0x3f
411   0000              
412   0000                 ; I/O REGISTER BIT FIELDS
413   0000              
414   0000                 defc CNTLA0_MPE = 0x80
415   0000                 defc CNTLA0_RE = 0x40
416   0000                 defc CNTLA0_TE = 0x20
417   0000                 defc CNTLA0_RTS0 = 0x10
418   0000                 defc CNTLA0_MPBR = 0x08
419   0000                 defc CNTLA0_EFR = 0x08
420   0000                 defc CNTLA0_MODE_MASK = 0x07
421   0000                 defc CNTLA0_MODE_8P2 = 0x07
422   0000                 defc CNTLA0_MODE_8P1 = 0x06
423   0000                 defc CNTLA0_MODE_8N2 = 0x05
424   0000                 defc CNTLA0_MODE_8N1 = 0x04
425   0000                 defc CNTLA0_MODE_7P2 = 0x03
426   0000                 defc CNTLA0_MODE_7P1 = 0x02
427   0000                 defc CNTLA0_MODE_7N2 = 0x01
428   0000                 defc CNTLA0_MODE_7N1 = 0x00
429   0000              
430   0000                 defc CNTLA1_MPE = 0x80
431   0000                 defc CNTLA1_RE = 0x40
432   0000                 defc CNTLA1_TE = 0x20
433   0000                 defc CNTLA1_CKA1D = 0x10
434   0000                 defc CNTLA1_MPBR = 0x08
435   0000                 defc CNTLA1_EFR = 0x08
436   0000                 defc CNTLA1_MODE_MASK = 0x07
437   0000                 defc CNTLA1_MODE_8P2 = 0x07
438   0000                 defc CNTLA1_MODE_8P1 = 0x06
439   0000                 defc CNTLA1_MODE_8N2 = 0x05
440   0000                 defc CNTLA1_MODE_8N1 = 0x04
441   0000                 defc CNTLA1_MODE_7P2 = 0x03
442   0000                 defc CNTLA1_MODE_7P1 = 0x02
443   0000                 defc CNTLA1_MODE_7N2 = 0x01
444   0000                 defc CNTLA1_MODE_7N1 = 0x00
445   0000              
446   0000                 defc CNTLB0_MPBT = 0x80
447   0000                 defc CNTLB0_MP = 0x40
448   0000                 defc CNTLB0_CTS = 0x20
449   0000                 defc CNTLB0_PS = 0x20
450   0000                 defc CNTLB0_PEO = 0x10
451   0000                 defc CNTLB0_DR = 0x08
452   0000                 defc CNTLB0_SS_MASK = 0x07
453   0000                 defc CNTLB0_SS_EXT = 0x07
454   0000                 defc CNTLB0_SS_DIV_64 = 0x06
455   0000                 defc CNTLB0_SS_DIV_32 = 0x05
456   0000                 defc CNTLB0_SS_DIV_16 = 0x04
457   0000                 defc CNTLB0_SS_DIV_8 = 0x03
458   0000                 defc CNTLB0_SS_DIV_4 = 0x02
459   0000                 defc CNTLB0_SS_DIV_2 = 0x01
460   0000                 defc CNTLB0_SS_DIV_1 = 0x00
461   0000              
462   0000                 defc CNTLB1_MPBT = 0x80
463   0000                 defc CNTLB1_MP = 0x40
464   0000                 defc CNTLB1_CTS = 0x20
465   0000                 defc CNTLB1_PS = 0x20
466   0000                 defc CNTLB1_PEO = 0x10
467   0000                 defc CNTLB1_DR = 0x08
468   0000                 defc CNTLB1_SS_MASK = 0x07
469   0000                 defc CNTLB1_SS_EXT = 0x07
470   0000                 defc CNTLB1_SS_DIV_64 = 0x06
471   0000                 defc CNTLB1_SS_DIV_32 = 0x05
472   0000                 defc CNTLB1_SS_DIV_16 = 0x04
473   0000                 defc CNTLB1_SS_DIV_8 = 0x03
474   0000                 defc CNTLB1_SS_DIV_4 = 0x02
475   0000                 defc CNTLB1_SS_DIV_2 = 0x01
476   0000                 defc CNTLB1_SS_DIV_1 = 0x00
477   0000              
478   0000                 defc STAT0_RDRF = 0x80
479   0000                 defc STAT0_OVRN = 0x40
480   0000                 defc STAT0_PE = 0x20
481   0000                 defc STAT0_FE = 0x10
482   0000                 defc STAT0_RIE = 0x08
483   0000                 defc STAT0_DCD0 = 0x04
484   0000                 defc STAT0_TDRE = 0x02
485   0000                 defc STAT0_TIE = 0x01
486   0000              
487   0000                 defc STAT1_RDRF = 0x80
488   0000                 defc STAT1_OVRN = 0x40
489   0000                 defc STAT1_PE = 0x20
490   0000                 defc STAT1_FE = 0x10
491   0000                 defc STAT1_RIE = 0x08
492   0000                 defc STAT1_CTS1E = 0x04
493   0000                 defc STAT1_TDRE = 0x02
494   0000                 defc STAT1_TIE = 0x01
495   0000              
496   0000                 defc CNTR_EF = 0x80
497   0000                 defc CNTR_EIE = 0x40
498   0000                 defc CNTR_RE = 0x20
499   0000                 defc CNTR_TE = 0x10
500   0000                 defc CNTR_SS_MASK = 0x07
501   0000                 defc CNTR_SS_EXT = 0x07
502   0000                 defc CNTR_SS_DIV_1280 = 0x06
503   0000                 defc CNTR_SS_DIV_640 = 0x05
504   0000                 defc CNTR_SS_DIV_320 = 0x04
505   0000                 defc CNTR_SS_DIV_160 = 0x03
506   0000                 defc CNTR_SS_DIV_80 = 0x02
507   0000                 defc CNTR_SS_DIV_40 = 0x01
508   0000                 defc CNTR_SS_DIV_20 = 0x00
509   0000              
510   0000                 ; PRT REGISTER BIT FIELDS
511   0000              
512   0000                 defc TCR_TIF1 = 0x80
513   0000                 defc TCR_TIF0 = 0x40
514   0000                 defc TCR_TIE1 = 0x20
515   0000                 defc TCR_TIE0 = 0x10
516   0000                 defc TCR_TOC1 = 0x08
517   0000                 defc TCR_TOC0 = 0x04
518   0000                 defc TCR_TDE1 = 0x02
519   0000                 defc TCR_TDE0 = 0x01
520   0000              
521   0000                 ; DMA REGISTER BIT FIELDS
522   0000              
523   0000                 defc DSTAT_DE1 = 0x80
524   0000                 defc DSTAT_DE0 = 0x40
525   0000                 defc DSTAT_DWE1 = 0x20
526   0000                 defc DSTAT_DWE0 = 0x10
527   0000                 defc DSTAT_DIE1 = 0x08
528   0000                 defc DSTAT_DIE0 = 0x04
529   0000                 defc DSTAT_DME = 0x01
530   0000              
531   0000                 defc DMODE_DM1 = 0x20
532   0000                 defc DMODE_DM0 = 0x10
533   0000                 defc DMODE_SM1 = 0x08
534   0000                 defc DMODE_SM0 = 0x04
535   0000                 defc DMODE_MMOD = 0x02
536   0000              
537   0000                 defc DCNTL_MWI1 = 0x80
538   0000                 defc DCNTL_MWI0 = 0x40
539   0000                 defc DCNTL_IWI1 = 0x20
540   0000                 defc DCNTL_IWI0 = 0x10
541   0000                 defc DCNTL_DMS1 = 0x08
542   0000                 defc DCNTL_DMS0 = 0x04
543   0000                 defc DCNTL_DIM1 = 0x02
544   0000                 defc DCNTL_DIM0 = 0x01
545   0000              
546   0000                 ; INT/TRAP CONTROL REGISTER (ITC) BIT FIELDS
547   0000              
548   0000                 defc ITC_TRAP = 0x80
549   0000                 defc ITC_UFO = 0x40
550   0000                 defc ITC_ITE2 = 0x04
551   0000                 defc ITC_ITE1 = 0x02
552   0000                 defc ITC_ITE0 = 0x01
553   0000              
554   0000                 ; Refresh CONTROL REGISTER (RCR) BIT FIELDS
555   0000              
556   0000                 defc RCR_REFE = 0x80
557   0000                 defc RCR_REFW = 0x40
558   0000                 defc RCR_CYC1 = 0x02
559   0000                 defc RCR_CYC0 = 0x01
560   0000              
561   0000                 ; Operation Mode CONTROL REGISTER (OMCR) BIT FIELDS
562   0000              
563   0000                 defc OMCR_M1E = 0x80
564   0000                 defc OMCR_M1TE = 0x40
565   0000                 defc OMCR_IOC = 0x20
566   0000              
567   0000                 ; CPU CLOCK MULTIPLIER REGISTER (CMR) BIT FIELDS (Z8S180 & higher Only)
568   0000              
569   0000                 defc CMR_X2 = 0x80
570   0000                 defc CMR_LN_XTAL = 0x40
571   0000              
572   0000                 ; CPU CONTROL REGISTER (CCR) BIT FIELDS (Z8S180 & higher Only)
573   0000              
574   0000                 defc CCR_XTAL_X2 = 0x80
575   0000                 defc CCR_STANDBY = 0x40
576   0000                 defc CCR_BREXT = 0x20
577   0000                 defc CCR_LNPHI = 0x10
578   0000                 defc CCR_IDLE = 0x08
579   0000                 defc CCR_LNIO = 0x04
580   0000                 defc CCR_LNCPUCTL = 0x02
581   0000                 defc CCR_LNAD = 0x01
582   0000              
583   0000              
584   0000              
585   0000              
586   0000              
587   0000              
588   0000              
589   0000              
590   0000              
591   0000              
592   0000              PUBLIC __CLIB_OPT_MULTITHREAD
593   0000              
594   0000              PUBLIC __CLIB_OPT_MULTITHREAD_LOCK_HEAPS
595   0000              PUBLIC __CLIB_OPT_MULTITHREAD_LOCK_FILES
596   0000              PUBLIC __CLIB_OPT_MULTITHREAD_LOCK_FLIST
597   0000              PUBLIC __CLIB_OPT_MULTITHREAD_LOCK_FDTBL
598   0000              PUBLIC __CLIB_OPT_MULTITHREAD_LOCK_FDSTR
599   0000              
600   0000              PUBLIC __CLIB_OPT_IMATH
601   0000              
602   0000              PUBLIC __CLIB_OPT_IMATH_FAST
603   0000              
604   0000              PUBLIC __CLIB_OPT_IMATH_FAST_DIV_UNROLL
605   0000              PUBLIC __CLIB_OPT_IMATH_FAST_DIV_LZEROS
606   0000              PUBLIC __CLIB_OPT_IMATH_FAST_MUL_UNROLL
607   0000              PUBLIC __CLIB_OPT_IMATH_FAST_MUL_LZEROS
608   0000              PUBLIC __CLIB_OPT_IMATH_FAST_LIA
609   0000              
610   0000              PUBLIC __CLIB_OPT_IMATH_SELECT
611   0000              
612   0000              PUBLIC __CLIB_OPT_IMATH_SELECT_FAST_ASR
613   0000              PUBLIC __CLIB_OPT_IMATH_SELECT_FAST_LSR
614   0000              PUBLIC __CLIB_OPT_IMATH_SELECT_FAST_LSL
615   0000              
616   0000              PUBLIC __CLIB_OPT_TXT2NUM
617   0000              
618   0000              PUBLIC __CLIB_OPT_TXT2NUM_INT_BIN
619   0000              PUBLIC __CLIB_OPT_TXT2NUM_INT_OCT
620   0000              PUBLIC __CLIB_OPT_TXT2NUM_INT_DEC
621   0000              PUBLIC __CLIB_OPT_TXT2NUM_INT_HEX
622   0000              
623   0000              PUBLIC __CLIB_OPT_TXT2NUM_LONG_BIN
624   0000              PUBLIC __CLIB_OPT_TXT2NUM_LONG_OCT
625   0000              PUBLIC __CLIB_OPT_TXT2NUM_LONG_DEC
626   0000              PUBLIC __CLIB_OPT_TXT2NUM_LONG_HEX
627   0000              
628   0000              PUBLIC __CLIB_OPT_TXT2NUM_SELECT
629   0000              
630   0000              PUBLIC __CLIB_OPT_TXT2NUM_SELECT_FAST_BIN
631   0000              PUBLIC __CLIB_OPT_TXT2NUM_SELECT_FAST_OCT
632   0000              PUBLIC __CLIB_OPT_TXT2NUM_SELECT_FAST_DEC
633   0000              PUBLIC __CLIB_OPT_TXT2NUM_SELECT_FAST_HEX
634   0000              
635   0000              PUBLIC __CLIB_OPT_NUM2TXT
636   0000              
637   0000              PUBLIC __CLIB_OPT_NUM2TXT_INT_BIN
638   0000              PUBLIC __CLIB_OPT_NUM2TXT_INT_OCT
639   0000              PUBLIC __CLIB_OPT_NUM2TXT_INT_DEC
640   0000              PUBLIC __CLIB_OPT_NUM2TXT_INT_HEX
641   0000              
642   0000              PUBLIC __CLIB_OPT_NUM2TXT_LONG_BIN
643   0000              PUBLIC __CLIB_OPT_NUM2TXT_LONG_OCT
644   0000              PUBLIC __CLIB_OPT_NUM2TXT_LONG_DEC
645   0000              PUBLIC __CLIB_OPT_NUM2TXT_LONG_HEX
646   0000              
647   0000              PUBLIC __CLIB_OPT_NUM2TXT_SELECT
648   0000              
649   0000              PUBLIC __CLIB_OPT_NUM2TXT_SELECT_FAST_BIN
650   0000              PUBLIC __CLIB_OPT_NUM2TXT_SELECT_FAST_OCT
651   0000              PUBLIC __CLIB_OPT_NUM2TXT_SELECT_FAST_DEC
652   0000              PUBLIC __CLIB_OPT_NUM2TXT_SELECT_FAST_HEX
653   0000              
654   0000              PUBLIC __CLIB_OPT_STDIO
655   0000              
656   0000              PUBLIC __CLIB_OPT_STDIO_VALID
657   0000              
658   0000              PUBLIC CHAR_CR
659   0000              PUBLIC CHAR_LF
660   0000              PUBLIC CHAR_BS
661   0000              PUBLIC CHAR_ESC
662   0000              PUBLIC CHAR_CAPS
663   0000              PUBLIC CHAR_BELL
664   0000              PUBLIC CHAR_CTRL_C
665   0000              PUBLIC CHAR_CTRL_D
666   0000              PUBLIC CHAR_CTRL_Z
667   0000              PUBLIC CHAR_CURSOR_UC
668   0000              PUBLIC CHAR_CURSOR_LC
669   0000              PUBLIC CHAR_PASSWORD
670   0000              
671   0000              PUBLIC __CLIB_OPT_PRINTF
672   0000              
673   0000              PUBLIC __CLIB_OPT_PRINTF_d
674   0000              PUBLIC __CLIB_OPT_PRINTF_u
675   0000              PUBLIC __CLIB_OPT_PRINTF_x
676   0000              PUBLIC __CLIB_OPT_PRINTF_X
677   0000              PUBLIC __CLIB_OPT_PRINTF_o
678   0000              PUBLIC __CLIB_OPT_PRINTF_n
679   0000              PUBLIC __CLIB_OPT_PRINTF_i
680   0000              PUBLIC __CLIB_OPT_PRINTF_p
681   0000              PUBLIC __CLIB_OPT_PRINTF_B
682   0000              PUBLIC __CLIB_OPT_PRINTF_s
683   0000              PUBLIC __CLIB_OPT_PRINTF_c
684   0000              PUBLIC __CLIB_OPT_PRINTF_I
685   0000              PUBLIC __CLIB_OPT_PRINTF_ld
686   0000              PUBLIC __CLIB_OPT_PRINTF_lu
687   0000              PUBLIC __CLIB_OPT_PRINTF_lx
688   0000              PUBLIC __CLIB_OPT_PRINTF_lX
689   0000              PUBLIC __CLIB_OPT_PRINTF_lo
690   0000              PUBLIC __CLIB_OPT_PRINTF_ln
691   0000              PUBLIC __CLIB_OPT_PRINTF_li
692   0000              PUBLIC __CLIB_OPT_PRINTF_lp
693   0000              PUBLIC __CLIB_OPT_PRINTF_lB
694   0000              PUBLIC __CLIB_OPT_PRINTF_a
695   0000              PUBLIC __CLIB_OPT_PRINTF_A
696   0000              PUBLIC __CLIB_OPT_PRINTF_e
697   0000              PUBLIC __CLIB_OPT_PRINTF_E
698   0000              PUBLIC __CLIB_OPT_PRINTF_f
699   0000              PUBLIC __CLIB_OPT_PRINTF_F
700   0000              PUBLIC __CLIB_OPT_PRINTF_g
701   0000              PUBLIC __CLIB_OPT_PRINTF_G
702   0000              
703   0000              PUBLIC __CLIB_OPT_PRINTF_2
704   0000              
705   0000              PUBLIC __CLIB_OPT_PRINTF_2_lld
706   0000              PUBLIC __CLIB_OPT_PRINTF_2_llu
707   0000              PUBLIC __CLIB_OPT_PRINTF_2_llx
708   0000              PUBLIC __CLIB_OPT_PRINTF_2_llX
709   0000              PUBLIC __CLIB_OPT_PRINTF_2_llo
710   0000              PUBLIC __CLIB_OPT_PRINTF_2_lli
711   0000              
712   0000              PUBLIC __CLIB_OPT_SCANF
713   0000              
714   0000              PUBLIC __CLIB_OPT_SCANF_d
715   0000              PUBLIC __CLIB_OPT_SCANF_u
716   0000              PUBLIC __CLIB_OPT_SCANF_x
717   0000              PUBLIC __CLIB_OPT_SCANF_X
718   0000              PUBLIC __CLIB_OPT_SCANF_o
719   0000              PUBLIC __CLIB_OPT_SCANF_n
720   0000              PUBLIC __CLIB_OPT_SCANF_i
721   0000              PUBLIC __CLIB_OPT_SCANF_p
722   0000              PUBLIC __CLIB_OPT_SCANF_B
723   0000              PUBLIC __CLIB_OPT_SCANF_s
724   0000              PUBLIC __CLIB_OPT_SCANF_c
725   0000              PUBLIC __CLIB_OPT_SCANF_I
726   0000              PUBLIC __CLIB_OPT_SCANF_ld
727   0000              PUBLIC __CLIB_OPT_SCANF_lu
728   0000              PUBLIC __CLIB_OPT_SCANF_lx
729   0000              PUBLIC __CLIB_OPT_SCANF_lX
730   0000              PUBLIC __CLIB_OPT_SCANF_lo
731   0000              PUBLIC __CLIB_OPT_SCANF_ln
732   0000              PUBLIC __CLIB_OPT_SCANF_li
733   0000              PUBLIC __CLIB_OPT_SCANF_lp
734   0000              PUBLIC __CLIB_OPT_SCANF_lB
735   0000              PUBLIC __CLIB_OPT_SCANF_BRACKET
736   0000              PUBLIC __CLIB_OPT_SCANF_a
737   0000              PUBLIC __CLIB_OPT_SCANF_A
738   0000              PUBLIC __CLIB_OPT_SCANF_e
739   0000              PUBLIC __CLIB_OPT_SCANF_E
740   0000              PUBLIC __CLIB_OPT_SCANF_f
741   0000              PUBLIC __CLIB_OPT_SCANF_F
742   0000              PUBLIC __CLIB_OPT_SCANF_g
743   0000              PUBLIC __CLIB_OPT_SCANF_G
744   0000              
745   0000              PUBLIC __CLIB_OPT_SCANF_2
746   0000              
747   0000              PUBLIC __CLIB_OPT_SCANF_2_lld
748   0000              PUBLIC __CLIB_OPT_SCANF_2_llu
749   0000              PUBLIC __CLIB_OPT_SCANF_2_llx
750   0000              PUBLIC __CLIB_OPT_SCANF_2_llX
751   0000              PUBLIC __CLIB_OPT_SCANF_2_llo
752   0000              PUBLIC __CLIB_OPT_SCANF_2_lli
753   0000              
754   0000              PUBLIC __CLIB_OPT_UNROLL
755   0000              
756   0000              PUBLIC __CLIB_OPT_UNROLL_MEMCPY
757   0000              PUBLIC __CLIB_OPT_UNROLL_MEMSET
758   0000              PUBLIC __CLIB_OPT_UNROLL_OTIR
759   0000              PUBLIC __CLIB_OPT_UNROLL_LDIR
760   0000              PUBLIC __CLIB_OPT_UNROLL_USER_SMC
761   0000              PUBLIC __CLIB_OPT_UNROLL_LIB_SMC
762   0000              
763   0000              PUBLIC __CLIB_OPT_STRTOD
764   0000              
765   0000              PUBLIC __CLIB_OPT_STRTOD_NAN
766   0000              PUBLIC __CLIB_OPT_STRTOD_INF
767   0000              PUBLIC __CLIB_OPT_STRTOD_HEX
768   0000              
769   0000              PUBLIC __CLIB_OPT_SORT
770   0000              
771   0000              PUBLIC __CLIB_OPT_SORT_INSERTION
772   0000              PUBLIC __CLIB_OPT_SORT_SHELL
773   0000              PUBLIC __CLIB_OPT_SORT_QUICK
774   0000              
775   0000              PUBLIC __CLIB_OPT_SORT_QSORT
776   0000              
777   0000              PUBLIC __CLIB_OPT_SORT_QSORT_PIVOT
778   0000              PUBLIC __CLIB_OPT_SORT_QSORT_PIVOT_MID
779   0000              PUBLIC __CLIB_OPT_SORT_QSORT_PIVOT_RAN
780   0000              PUBLIC __CLIB_OPT_SORT_QSORT_ENABLE_INSERTION
781   0000              PUBLIC __CLIB_OPT_SORT_QSORT_ENABLE_EQUAL
782   0000              
783   0000              PUBLIC __CLIB_OPT_ERROR
784   0000              
785   0000              PUBLIC __CLIB_OPT_ERROR_ENABLED
786   0000              PUBLIC __CLIB_OPT_ERROR_VERBOSE
787   0000              
788   0000              
789   0000              
790   0000              
791   0000              defc __CLIB_OPT_MULTITHREAD = 0x00
792   0000              
793   0000              defc __CLIB_OPT_MULTITHREAD_LOCK_HEAPS = 0x01
794   0000              defc __CLIB_OPT_MULTITHREAD_LOCK_FILES = 0x02
795   0000              defc __CLIB_OPT_MULTITHREAD_LOCK_FLIST = 0x04
796   0000              defc __CLIB_OPT_MULTITHREAD_LOCK_FDTBL = 0x08
797   0000              defc __CLIB_OPT_MULTITHREAD_LOCK_FDSTR = 0x10
798   0000              
799   0000              defc __CLIB_OPT_IMATH = 0
800   0000              
801   0000              defc __CLIB_OPT_IMATH_FAST = 0x0f
802   0000              
803   0000              defc __CLIB_OPT_IMATH_FAST_DIV_UNROLL = 0x01
804   0000              defc __CLIB_OPT_IMATH_FAST_DIV_LZEROS = 0x02
805   0000              defc __CLIB_OPT_IMATH_FAST_MUL_UNROLL = 0x04
806   0000              defc __CLIB_OPT_IMATH_FAST_MUL_LZEROS = 0x08
807   0000              defc __CLIB_OPT_IMATH_FAST_LIA = 0x80
808   0000              
809   0000              defc __CLIB_OPT_IMATH_SELECT = 0x00
810   0000              
811   0000              defc __CLIB_OPT_IMATH_SELECT_FAST_ASR = 0x01
812   0000              defc __CLIB_OPT_IMATH_SELECT_FAST_LSR = 0x02
813   0000              defc __CLIB_OPT_IMATH_SELECT_FAST_LSL = 0x04
814   0000              
815   0000              defc __CLIB_OPT_TXT2NUM = 0x04
816   0000              
817   0000              defc __CLIB_OPT_TXT2NUM_INT_BIN = 0x01
818   0000              defc __CLIB_OPT_TXT2NUM_INT_OCT = 0x02
819   0000              defc __CLIB_OPT_TXT2NUM_INT_DEC = 0x04
820   0000              defc __CLIB_OPT_TXT2NUM_INT_HEX = 0x08
821   0000              
822   0000              defc __CLIB_OPT_TXT2NUM_LONG_BIN = 0x10
823   0000              defc __CLIB_OPT_TXT2NUM_LONG_OCT = 0x20
824   0000              defc __CLIB_OPT_TXT2NUM_LONG_DEC = 0x40
825   0000              defc __CLIB_OPT_TXT2NUM_LONG_HEX = 0x80
826   0000              
827   0000              defc __CLIB_OPT_TXT2NUM_SELECT = 0x00
828   0000              
829   0000              defc __CLIB_OPT_TXT2NUM_SELECT_FAST_BIN = 0x01
830   0000              defc __CLIB_OPT_TXT2NUM_SELECT_FAST_OCT = 0x02
831   0000              defc __CLIB_OPT_TXT2NUM_SELECT_FAST_DEC = 0x04
832   0000              defc __CLIB_OPT_TXT2NUM_SELECT_FAST_HEX = 0x08
833   0000              
834   0000              defc __CLIB_OPT_NUM2TXT = 0x00
835   0000              
836   0000              defc __CLIB_OPT_NUM2TXT_INT_BIN = 0x01
837   0000              defc __CLIB_OPT_NUM2TXT_INT_OCT = 0x02
838   0000              defc __CLIB_OPT_NUM2TXT_INT_DEC = 0x04
839   0000              defc __CLIB_OPT_NUM2TXT_INT_HEX = 0x08
840   0000              
841   0000              defc __CLIB_OPT_NUM2TXT_LONG_BIN = 0x10
842   0000              defc __CLIB_OPT_NUM2TXT_LONG_OCT = 0x20
843   0000              defc __CLIB_OPT_NUM2TXT_LONG_DEC = 0x40
844   0000              defc __CLIB_OPT_NUM2TXT_LONG_HEX = 0x80
845   0000              
846   0000              defc __CLIB_OPT_NUM2TXT_SELECT = 0x00
847   0000              
848   0000              defc __CLIB_OPT_NUM2TXT_SELECT_FAST_BIN = 0x01
849   0000              defc __CLIB_OPT_NUM2TXT_SELECT_FAST_OCT = 0x02
850   0000              defc __CLIB_OPT_NUM2TXT_SELECT_FAST_DEC = 0x04
851   0000              defc __CLIB_OPT_NUM2TXT_SELECT_FAST_HEX = 0x08
852   0000              
853   0000              defc __CLIB_OPT_STDIO = 0x00
854   0000              
855   0000              defc __CLIB_OPT_STDIO_VALID = 0x01
856   0000              
857   0000              defc CHAR_CR = 13
858   0000              defc CHAR_LF = 10
859   0000              defc CHAR_BS = 8
860   0000              defc CHAR_ESC = 27
861   0000              defc CHAR_CAPS = 6
862   0000              defc CHAR_BELL = 7
863   0000              defc CHAR_CTRL_C = 3
864   0000              defc CHAR_CTRL_D = 4
865   0000              defc CHAR_CTRL_Z = 26
866   0000              defc CHAR_CURSOR_UC = 45
867   0000              defc CHAR_CURSOR_LC = 95
868   0000              defc CHAR_PASSWORD = 42
869   0000              
870   0000              defc __CLIB_OPT_PRINTF = 0x002ff6ff
871   0000              
872   0000              defc __CLIB_OPT_PRINTF_d = 0x00000001
873   0000              defc __CLIB_OPT_PRINTF_u = 0x00000002
874   0000              defc __CLIB_OPT_PRINTF_x = 0x00000004
875   0000              defc __CLIB_OPT_PRINTF_X = 0x00000008
876   0000              defc __CLIB_OPT_PRINTF_o = 0x00000010
877   0000              defc __CLIB_OPT_PRINTF_n = 0x00000020
878   0000              defc __CLIB_OPT_PRINTF_i = 0x00000040
879   0000              defc __CLIB_OPT_PRINTF_p = 0x00000080
880   0000              defc __CLIB_OPT_PRINTF_B = 0x00000100
881   0000              defc __CLIB_OPT_PRINTF_s = 0x00000200
882   0000              defc __CLIB_OPT_PRINTF_c = 0x00000400
883   0000              defc __CLIB_OPT_PRINTF_I = 0x00000800
884   0000              defc __CLIB_OPT_PRINTF_ld = 0x00001000
885   0000              defc __CLIB_OPT_PRINTF_lu = 0x00002000
886   0000              defc __CLIB_OPT_PRINTF_lx = 0x00004000
887   0000              defc __CLIB_OPT_PRINTF_lX = 0x00008000
888   0000              defc __CLIB_OPT_PRINTF_lo = 0x00010000
889   0000              defc __CLIB_OPT_PRINTF_ln = 0x00020000
890   0000              defc __CLIB_OPT_PRINTF_li = 0x00040000
891   0000              defc __CLIB_OPT_PRINTF_lp = 0x00080000
892   0000              defc __CLIB_OPT_PRINTF_lB = 0x00100000
893   0000              defc __CLIB_OPT_PRINTF_a = 0x00400000
894   0000              defc __CLIB_OPT_PRINTF_A = 0x00800000
895   0000              defc __CLIB_OPT_PRINTF_e = 0x01000000
896   0000              defc __CLIB_OPT_PRINTF_E = 0x02000000
897   0000              defc __CLIB_OPT_PRINTF_f = 0x04000000
898   0000              defc __CLIB_OPT_PRINTF_F = 0x08000000
899   0000              defc __CLIB_OPT_PRINTF_g = 0x10000000
900   0000              defc __CLIB_OPT_PRINTF_G = 0x20000000
901   0000              
902   0000              defc __CLIB_OPT_PRINTF_2 = 0x00
903   0000              
904   0000              defc __CLIB_OPT_PRINTF_2_lld = 0x01
905   0000              defc __CLIB_OPT_PRINTF_2_llu = 0x02
906   0000              defc __CLIB_OPT_PRINTF_2_llx = 0x04
907   0000              defc __CLIB_OPT_PRINTF_2_llX = 0x08
908   0000              defc __CLIB_OPT_PRINTF_2_llo = 0x10
909   0000              defc __CLIB_OPT_PRINTF_2_lli = 0x40
910   0000              
911   0000              defc __CLIB_OPT_SCANF = 0x002ff6ff
912   0000              
913   0000              defc __CLIB_OPT_SCANF_d = 0x00000001
914   0000              defc __CLIB_OPT_SCANF_u = 0x00000002
915   0000              defc __CLIB_OPT_SCANF_x = 0x00000004
916   0000              defc __CLIB_OPT_SCANF_X = 0x00000008
917   0000              defc __CLIB_OPT_SCANF_o = 0x00000010
918   0000              defc __CLIB_OPT_SCANF_n = 0x00000020
919   0000              defc __CLIB_OPT_SCANF_i = 0x00000040
920   0000              defc __CLIB_OPT_SCANF_p = 0x00000080
921   0000              defc __CLIB_OPT_SCANF_B = 0x00000100
922   0000              defc __CLIB_OPT_SCANF_s = 0x00000200
923   0000              defc __CLIB_OPT_SCANF_c = 0x00000400
924   0000              defc __CLIB_OPT_SCANF_I = 0x00000800
925   0000              defc __CLIB_OPT_SCANF_ld = 0x00001000
926   0000              defc __CLIB_OPT_SCANF_lu = 0x00002000
927   0000              defc __CLIB_OPT_SCANF_lx = 0x00004000
928   0000              defc __CLIB_OPT_SCANF_lX = 0x00008000
929   0000              defc __CLIB_OPT_SCANF_lo = 0x00010000
930   0000              defc __CLIB_OPT_SCANF_ln = 0x00020000
931   0000              defc __CLIB_OPT_SCANF_li = 0x00040000
932   0000              defc __CLIB_OPT_SCANF_lp = 0x00080000
933   0000              defc __CLIB_OPT_SCANF_lB = 0x00100000
934   0000              defc __CLIB_OPT_SCANF_BRACKET = 0x00200000
935   0000              defc __CLIB_OPT_SCANF_a = 0x00400000
936   0000              defc __CLIB_OPT_SCANF_A = 0x00800000
937   0000              defc __CLIB_OPT_SCANF_e = 0x01000000
938   0000              defc __CLIB_OPT_SCANF_E = 0x02000000
939   0000              defc __CLIB_OPT_SCANF_f = 0x04000000
940   0000              defc __CLIB_OPT_SCANF_F = 0x08000000
941   0000              defc __CLIB_OPT_SCANF_g = 0x10000000
942   0000              defc __CLIB_OPT_SCANF_G = 0x20000000
943   0000              
944   0000              defc __CLIB_OPT_SCANF_2 = 0x00
945   0000              
946   0000              defc __CLIB_OPT_SCANF_2_lld = 0x01
947   0000              defc __CLIB_OPT_SCANF_2_llu = 0x02
948   0000              defc __CLIB_OPT_SCANF_2_llx = 0x04
949   0000              defc __CLIB_OPT_SCANF_2_llX = 0x08
950   0000              defc __CLIB_OPT_SCANF_2_llo = 0x10
951   0000              defc __CLIB_OPT_SCANF_2_lli = 0x40
952   0000              
953   0000              defc __CLIB_OPT_UNROLL = 0x00
954   0000              
955   0000              defc __CLIB_OPT_UNROLL_MEMCPY = 0x01
956   0000              defc __CLIB_OPT_UNROLL_MEMSET = 0x02
957   0000              defc __CLIB_OPT_UNROLL_OTIR = 0x10
958   0000              defc __CLIB_OPT_UNROLL_LDIR = 0x20
959   0000              defc __CLIB_OPT_UNROLL_USER_SMC = 0x40
960   0000              defc __CLIB_OPT_UNROLL_LIB_SMC = 0x80
961   0000              
962   0000              defc __CLIB_OPT_STRTOD = 0x00
963   0000              
964   0000              defc __CLIB_OPT_STRTOD_NAN = 0x01
965   0000              defc __CLIB_OPT_STRTOD_INF = 0x01
966   0000              defc __CLIB_OPT_STRTOD_HEX = 0x02
967   0000              
968   0000              defc __CLIB_OPT_SORT = 1
969   0000              
970   0000              defc __CLIB_OPT_SORT_INSERTION = 0
971   0000              defc __CLIB_OPT_SORT_SHELL = 1
972   0000              defc __CLIB_OPT_SORT_QUICK = 2
973   0000              
974   0000              defc __CLIB_OPT_SORT_QSORT = 0x0c
975   0000              
976   0000              defc __CLIB_OPT_SORT_QSORT_PIVOT = 0x3
977   0000              defc __CLIB_OPT_SORT_QSORT_PIVOT_MID = 0x0
978   0000              defc __CLIB_OPT_SORT_QSORT_PIVOT_RAN = 0x1
979   0000              defc __CLIB_OPT_SORT_QSORT_ENABLE_INSERTION = 0x04
980   0000              defc __CLIB_OPT_SORT_QSORT_ENABLE_EQUAL = 0x08
981   0000              
982   0000              defc __CLIB_OPT_ERROR = 0x00
983   0000              
984   0000              defc __CLIB_OPT_ERROR_ENABLED = 0x01
985   0000              defc __CLIB_OPT_ERROR_VERBOSE = 0x02
986   0000              
987   0000              
988   0000              
989   0000              
990   0000              
991   0000              
992   0000              
993   0000              
994   0000              
995   0000              
996   0000              
997   0000              
998   0000              
999   0000              PUBLIC __EOK
1000  0000              PUBLIC __EACCES
1001  0000              PUBLIC __EBADF
1002  0000              PUBLIC __EBDFD
1003  0000              PUBLIC __EDOM
1004  0000              PUBLIC __EFBIG
1005  0000              PUBLIC __EINVAL
1006  0000              PUBLIC __EIO
1007  0000              PUBLIC __EMFILE
1008  0000              PUBLIC __ENFILE
1009  0000              PUBLIC __ENOLCK
1010  0000              PUBLIC __ENOMEM
1011  0000              PUBLIC __ENOTSUP
1012  0000              PUBLIC __EOVERFLOW
1013  0000              PUBLIC __ERANGE
1014  0000              PUBLIC __ESTAT
1015  0000              PUBLIC __EAGAIN
1016  0000              PUBLIC __EWOULDBLOCK
1017  0000              
1018  0000              PUBLIC __ERROR_NEXT
1019  0000              
1020  0000              PUBLIC STDIO_SEEK_SET
1021  0000              PUBLIC STDIO_SEEK_CUR
1022  0000              PUBLIC STDIO_SEEK_END
1023  0000              
1024  0000              PUBLIC STDIO_MSG_PUTC
1025  0000              PUBLIC STDIO_MSG_WRIT
1026  0000              PUBLIC STDIO_MSG_GETC
1027  0000              PUBLIC STDIO_MSG_EATC
1028  0000              PUBLIC STDIO_MSG_READ
1029  0000              PUBLIC STDIO_MSG_SEEK
1030  0000              PUBLIC STDIO_MSG_ICTL
1031  0000              PUBLIC STDIO_MSG_FLSH
1032  0000              PUBLIC STDIO_MSG_CLOS
1033  0000              
1034  0000              PUBLIC ITERM_MSG_GETC
1035  0000              PUBLIC ITERM_MSG_REJECT
1036  0000              PUBLIC ITERM_MSG_INTERRUPT
1037  0000              PUBLIC ITERM_MSG_PUTC
1038  0000              PUBLIC ITERM_MSG_PRINT_CURSOR
1039  0000              PUBLIC ITERM_MSG_ERASE_CURSOR
1040  0000              PUBLIC ITERM_MSG_ERASE_CURSOR_PWD
1041  0000              PUBLIC ITERM_MSG_BS
1042  0000              PUBLIC ITERM_MSG_BS_PWD
1043  0000              PUBLIC ITERM_MSG_READLINE_BEGIN
1044  0000              PUBLIC ITERM_MSG_READLINE_END
1045  0000              PUBLIC ITERM_MSG_READLINE_SCROLL_LIMIT
1046  0000              PUBLIC ITERM_MSG_BELL
1047  0000              
1048  0000              PUBLIC __MESSAGE_ITERM_NEXT__
1049  0000              
1050  0000              PUBLIC OTERM_MSG_PUTC
1051  0000              PUBLIC OTERM_MSG_TTY
1052  0000              PUBLIC OTERM_MSG_FZX_PUTC
1053  0000              PUBLIC OTERM_MSG_PRINTC
1054  0000              PUBLIC OTERM_MSG_SCROLL
1055  0000              PUBLIC OTERM_MSG_SCROLL_LIMIT
1056  0000              PUBLIC OTERM_MSG_CLS
1057  0000              PUBLIC OTERM_MSG_PAUSE
1058  0000              PUBLIC OTERM_MSG_BELL
1059  0000              PUBLIC OTERM_MSG_PSCROLL
1060  0000              PUBLIC OTERM_MSG_FZX_GET_XOR_DRAW
1061  0000              
1062  0000              PUBLIC __MESSAGE_OTERM_NEXT__
1063  0000              
1064  0000              PUBLIC ICHAR_MSG_GETC
1065  0000              PUBLIC OCHAR_MSG_PUTC_BIN
1066  0000              PUBLIC OCHAR_MSG_PUTC
1067  0000              
1068  0000              PUBLIC __MESSAGE_NEXT__
1069  0000              
1070  0000              PUBLIC mtx_plain
1071  0000              PUBLIC mtx_recursive
1072  0000              PUBLIC mtx_timed
1073  0000              
1074  0000              PUBLIC thrd_success
1075  0000              PUBLIC thrd_error
1076  0000              PUBLIC thrd_nomem
1077  0000              PUBLIC thrd_busy
1078  0000              PUBLIC thrd_timedout
1079  0000              
1080  0000              PUBLIC IOCTL_RESET
1081  0000              
1082  0000              PUBLIC IOCTL_ITERM_ECHO
1083  0000              PUBLIC IOCTL_ITERM_PASS
1084  0000              PUBLIC IOCTL_ITERM_LINE
1085  0000              PUBLIC IOCTL_ITERM_COOK
1086  0000              PUBLIC IOCTL_ITERM_CAPS
1087  0000              PUBLIC IOCTL_ITERM_CRLF
1088  0000              PUBLIC IOCTL_ITERM_CURS
1089  0000              
1090  0000              PUBLIC IOCTL_ITERM_TIE
1091  0000              PUBLIC IOCTL_ITERM_GET_EDITBUF
1092  0000              PUBLIC IOCTL_ITERM_SET_EDITBUF
1093  0000              
1094  0000              PUBLIC IOCTL_OTERM_PAGE
1095  0000              PUBLIC IOCTL_OTERM_PAUSE
1096  0000              PUBLIC IOCTL_OTERM_COOK
1097  0000              PUBLIC IOCTL_OTERM_CRLF
1098  0000              PUBLIC IOCTL_OTERM_CLEAR
1099  0000              PUBLIC IOCTL_OTERM_SIGNAL
1100  0000              PUBLIC IOCTL_OTERM_BELL
1101  0000              
1102  0000              PUBLIC IOCTL_OTERM_CLS
1103  0000              PUBLIC IOCTL_OTERM_RESET_SCROLL
1104  0000              PUBLIC IOCTL_OTERM_GET_WINDOW_COORD
1105  0000              PUBLIC IOCTL_OTERM_SET_WINDOW_COORD
1106  0000              PUBLIC IOCTL_OTERM_GET_WINDOW_RECT
1107  0000              PUBLIC IOCTL_OTERM_SET_WINDOW_RECT
1108  0000              PUBLIC IOCTL_OTERM_GET_CURSOR_COORD
1109  0000              PUBLIC IOCTL_OTERM_SET_CURSOR_COORD
1110  0000              PUBLIC IOCTL_OTERM_GET_OTERM
1111  0000              PUBLIC IOCTL_OTERM_SCROLL
1112  0000              PUBLIC IOCTL_OTERM_FONT
1113  0000              PUBLIC IOCTL_OTERM_SCROLL_LIMIT
1114  0000              
1115  0000              PUBLIC IOCTL_OTERM_FZX_GET_PAPER_COORD
1116  0000              PUBLIC IOCTL_OTERM_FZX_SET_PAPER_COORD
1117  0000              PUBLIC IOCTL_OTERM_FZX_GET_PAPER_RECT
1118  0000              PUBLIC IOCTL_OTERM_FZX_SET_PAPER_RECT
1119  0000              PUBLIC IOCTL_OTERM_FZX_LEFT_MARGIN
1120  0000              PUBLIC IOCTL_OTERM_FZX_LINE_SPACING
1121  0000              PUBLIC IOCTL_OTERM_FZX_SPACE_EXPAND
1122  0000              PUBLIC IOCTL_OTERM_FZX_GET_FZX_STATE
1123  0000              PUBLIC IOCTL_OTERM_FZX_SET_FZX_STATE
1124  0000              
1125  0000              PUBLIC IOCTL_ICHAR_CRLF
1126  0000              
1127  0000              PUBLIC IOCTL_OCHAR_CRLF
1128  0000              
1129  0000              
1130  0000              
1131  0000              
1132  0000              defc __EOK = 0
1133  0000              defc __EACCES = 1
1134  0000              defc __EBADF = 2
1135  0000              defc __EBDFD = 3
1136  0000              defc __EDOM = 4
1137  0000              defc __EFBIG = 5
1138  0000              defc __EINVAL = 6
1139  0000              defc __EIO = 7
1140  0000              defc __EMFILE = 8
1141  0000              defc __ENFILE = 9
1142  0000              defc __ENOLCK = 10
1143  0000              defc __ENOMEM = 11
1144  0000              defc __ENOTSUP = 12
1145  0000              defc __EOVERFLOW = 13
1146  0000              defc __ERANGE = 14
1147  0000              defc __ESTAT = 15
1148  0000              defc __EAGAIN = 16
1149  0000              defc __EWOULDBLOCK = 16
1150  0000              
1151  0000              defc __ERROR_NEXT = 50
1152  0000              
1153  0000              defc STDIO_SEEK_SET = 0
1154  0000              defc STDIO_SEEK_CUR = 1
1155  0000              defc STDIO_SEEK_END = 2
1156  0000              
1157  0000              defc STDIO_MSG_PUTC = 1
1158  0000              defc STDIO_MSG_WRIT = 2
1159  0000              defc STDIO_MSG_GETC = 3
1160  0000              defc STDIO_MSG_EATC = 4
1161  0000              defc STDIO_MSG_READ = 5
1162  0000              defc STDIO_MSG_SEEK = 6
1163  0000              defc STDIO_MSG_ICTL = 7
1164  0000              defc STDIO_MSG_FLSH = 8
1165  0000              defc STDIO_MSG_CLOS = 9
1166  0000              
1167  0000              defc ITERM_MSG_GETC = 15
1168  0000              defc ITERM_MSG_REJECT = 16
1169  0000              defc ITERM_MSG_INTERRUPT = 17
1170  0000              defc ITERM_MSG_PUTC = 18
1171  0000              defc ITERM_MSG_PRINT_CURSOR = 19
1172  0000              defc ITERM_MSG_ERASE_CURSOR = 20
1173  0000              defc ITERM_MSG_ERASE_CURSOR_PWD = 21
1174  0000              defc ITERM_MSG_BS = 22
1175  0000              defc ITERM_MSG_BS_PWD = 23
1176  0000              defc ITERM_MSG_READLINE_BEGIN = 24
1177  0000              defc ITERM_MSG_READLINE_END = 25
1178  0000              defc ITERM_MSG_READLINE_SCROLL_LIMIT = 26
1179  0000              defc ITERM_MSG_BELL = 27
1180  0000              
1181  0000              defc __MESSAGE_ITERM_NEXT__ = 28
1182  0000              
1183  0000              defc OTERM_MSG_PUTC = 30
1184  0000              defc OTERM_MSG_TTY = 31
1185  0000              defc OTERM_MSG_FZX_PUTC = 32
1186  0000              defc OTERM_MSG_PRINTC = 33
1187  0000              defc OTERM_MSG_SCROLL = 34
1188  0000              defc OTERM_MSG_SCROLL_LIMIT = 35
1189  0000              defc OTERM_MSG_CLS = 36
1190  0000              defc OTERM_MSG_PAUSE = 37
1191  0000              defc OTERM_MSG_BELL = 38
1192  0000              defc OTERM_MSG_PSCROLL = 39
1193  0000              defc OTERM_MSG_FZX_GET_XOR_DRAW = 40
1194  0000              
1195  0000              defc __MESSAGE_OTERM_NEXT__ = 41
1196  0000              
1197  0000              defc ICHAR_MSG_GETC = 15
1198  0000              defc OCHAR_MSG_PUTC_BIN = 30
1199  0000              defc OCHAR_MSG_PUTC = 33
1200  0000              
1201  0000              defc __MESSAGE_NEXT__ = 45
1202  0000              
1203  0000              defc mtx_plain = 0x01
1204  0000              defc mtx_recursive = 0x02
1205  0000              defc mtx_timed = 0x04
1206  0000              
1207  0000              defc thrd_success = 0x00
1208  0000              defc thrd_error = 0x01
1209  0000              defc thrd_nomem = 0x02
1210  0000              defc thrd_busy = 0x04
1211  0000              defc thrd_timedout = 0x08
1212  0000              
1213  0000              defc IOCTL_RESET = 0x0000
1214  0000              
1215  0000              defc IOCTL_ITERM_ECHO = 0xc081
1216  0000              defc IOCTL_ITERM_PASS = 0xc041
1217  0000              defc IOCTL_ITERM_LINE = 0xc021
1218  0000              defc IOCTL_ITERM_COOK = 0xc011
1219  0000              defc IOCTL_ITERM_CAPS = 0xc009
1220  0000              defc IOCTL_ITERM_CRLF = 0xc101
1221  0000              defc IOCTL_ITERM_CURS = 0xc201
1222  0000              
1223  0000              defc IOCTL_ITERM_TIE = 0x0201
1224  0000              defc IOCTL_ITERM_GET_EDITBUF = 0x0381
1225  0000              defc IOCTL_ITERM_SET_EDITBUF = 0x0301
1226  0000              
1227  0000              defc IOCTL_OTERM_PAGE = 0xc082
1228  0000              defc IOCTL_OTERM_PAUSE = 0xc042
1229  0000              defc IOCTL_OTERM_COOK = 0xc022
1230  0000              defc IOCTL_OTERM_CRLF = 0xc012
1231  0000              defc IOCTL_OTERM_CLEAR = 0xe002
1232  0000              defc IOCTL_OTERM_SIGNAL = 0xc202
1233  0000              defc IOCTL_OTERM_BELL = 0xc102
1234  0000              
1235  0000              defc IOCTL_OTERM_CLS = 0x0102
1236  0000              defc IOCTL_OTERM_RESET_SCROLL = 0x0202
1237  0000              defc IOCTL_OTERM_GET_WINDOW_COORD = 0x0382
1238  0000              defc IOCTL_OTERM_SET_WINDOW_COORD = 0x0302
1239  0000              defc IOCTL_OTERM_GET_WINDOW_RECT = 0x0482
1240  0000              defc IOCTL_OTERM_SET_WINDOW_RECT = 0x0402
1241  0000              defc IOCTL_OTERM_GET_CURSOR_COORD = 0x0582
1242  0000              defc IOCTL_OTERM_SET_CURSOR_COORD = 0x0502
1243  0000              defc IOCTL_OTERM_GET_OTERM = 0x0602
1244  0000              defc IOCTL_OTERM_SCROLL = 0x0702
1245  0000              defc IOCTL_OTERM_FONT = 0x0802
1246  0000              defc IOCTL_OTERM_SCROLL_LIMIT = 0x0902
1247  0000              
1248  0000              defc IOCTL_OTERM_FZX_GET_PAPER_COORD = 0x0a82
1249  0000              defc IOCTL_OTERM_FZX_SET_PAPER_COORD = 0x0a02
1250  0000              defc IOCTL_OTERM_FZX_GET_PAPER_RECT = 0x0b82
1251  0000              defc IOCTL_OTERM_FZX_SET_PAPER_RECT = 0x0b02
1252  0000              defc IOCTL_OTERM_FZX_LEFT_MARGIN = 0x0c02
1253  0000              defc IOCTL_OTERM_FZX_LINE_SPACING = 0x0d02
1254  0000              defc IOCTL_OTERM_FZX_SPACE_EXPAND = 0x0e02
1255  0000              defc IOCTL_OTERM_FZX_GET_FZX_STATE = 0x0f82
1256  0000              defc IOCTL_OTERM_FZX_SET_FZX_STATE = 0x0f02
1257  0000              
1258  0000              defc IOCTL_ICHAR_CRLF = 0xc103
1259  0000              
1260  0000              defc IOCTL_OCHAR_CRLF = 0xc014
1261  0000              
1262  0000              
1263  0000              
1264  0000              
1265  0000              
1266  0000              
1267  0000              
1268  0000              
1269  0000              
1270  0000              
1271  0000              
1272  0000              
1273  0000              
1274  0000              
1275  0000              
1276  0000              
1277  0000              
1278  0000              
1279  0000              
1280  0000              
1281  0000              
1282  0000              
1283  0000              
1284  0000              
1285  0000              
1286  0000              
1287  0000              
1288  0000              
1289  0000              PUBLIC __BF_CIO
1290  0000              PUBLIC __BF_CIOIN
1291  0000              PUBLIC __BF_CIOOUT
1292  0000              PUBLIC __BF_CIOIST
1293  0000              PUBLIC __BF_CIOOST
1294  0000              PUBLIC __BF_CIOINIT
1295  0000              PUBLIC __BF_CIOQUERY
1296  0000              PUBLIC __BF_CIODEVICE
1297  0000              
1298  0000              PUBLIC __BF_DIO
1299  0000              PUBLIC __BF_DIOSTATUS
1300  0000              PUBLIC __BF_DIORESET
1301  0000              PUBLIC __BF_DIOSEEK
1302  0000              PUBLIC __BF_DIOREAD
1303  0000              PUBLIC __BF_DIOWRITE
1304  0000              PUBLIC __BF_DIOVERIFY
1305  0000              PUBLIC __BF_DIOFORMAT
1306  0000              PUBLIC __BF_DIODEVICE
1307  0000              PUBLIC __BF_DIOMEDIA
1308  0000              PUBLIC __BF_DIODEFMED
1309  0000              PUBLIC __BF_DIOCAP
1310  0000              PUBLIC __BF_DIOGEOM
1311  0000              
1312  0000              PUBLIC __BF_RTC
1313  0000              PUBLIC __BF_RTCGETTIM
1314  0000              PUBLIC __BF_RTCSETTIM
1315  0000              PUBLIC __BF_RTCGETBYT
1316  0000              PUBLIC __BF_RTCSETBYT
1317  0000              PUBLIC __BF_RTCGETBLK
1318  0000              PUBLIC __BF_RTCSETBLK
1319  0000              
1320  0000              PUBLIC __BF_EMU
1321  0000              
1322  0000              PUBLIC __BF_VDA
1323  0000              PUBLIC __BF_VDAINI
1324  0000              PUBLIC __BF_VDAQRY
1325  0000              PUBLIC __BF_VDARES
1326  0000              PUBLIC __BF_VDADEV
1327  0000              PUBLIC __BF_VDASCS
1328  0000              PUBLIC __BF_VDASCP
1329  0000              PUBLIC __BF_VDASAT
1330  0000              PUBLIC __BF_VDASCO
1331  0000              PUBLIC __BF_VDAWRC
1332  0000              PUBLIC __BF_VDAFIL
1333  0000              PUBLIC __BF_VDACPY
1334  0000              PUBLIC __BF_VDASCR
1335  0000              PUBLIC __BF_VDAKST
1336  0000              PUBLIC __BF_VDAKFL
1337  0000              PUBLIC __BF_VDAKRD
1338  0000              
1339  0000              PUBLIC __BF_SYS
1340  0000              PUBLIC __BF_SYSRESET
1341  0000              PUBLIC __BF_SYSVER
1342  0000              PUBLIC __BF_SYSSETBNK
1343  0000              PUBLIC __BF_SYSGETBNK
1344  0000              PUBLIC __BF_SYSSETCPY
1345  0000              PUBLIC __BF_SYSBNKCPY
1346  0000              PUBLIC __BF_SYSALLOC
1347  0000              PUBLIC __BF_SYSFREE
1348  0000              PUBLIC __BF_SYSGET
1349  0000              PUBLIC __BF_SYSSET
1350  0000              PUBLIC __BF_SYSPEEK
1351  0000              PUBLIC __BF_SYSPOKE
1352  0000              PUBLIC __BF_SYSINT
1353  0000              
1354  0000              PUBLIC __BF_SYSGET_CIOCNT
1355  0000              PUBLIC __BF_SYSGET_DIOCNT
1356  0000              PUBLIC __BF_SYSGET_VDACNT
1357  0000              PUBLIC __BF_SYSGET_TIMER
1358  0000              PUBLIC __BF_SYSGET_SECS
1359  0000              PUBLIC __BF_SYSGET_BOOTINFO
1360  0000              PUBLIC __BF_SYSGET_CPUINFO
1361  0000              PUBLIC __BF_SYSGET_MEMINFO
1362  0000              PUBLIC __BF_SYSGET_BNKINFO
1363  0000              
1364  0000              PUBLIC __BF_SYSSET_TIMER
1365  0000              PUBLIC __BF_SYSSET_SECS
1366  0000              PUBLIC __BF_SYSSET_BOOTINFO
1367  0000              
1368  0000              PUBLIC __BF_SYSINT_INFO
1369  0000              PUBLIC __BF_SYSINT_GET
1370  0000              PUBLIC __BF_SYSINT_SET
1371  0000              
1372  0000              PUBLIC __CIODEV_UART
1373  0000              PUBLIC __CIODEV_ASCI
1374  0000              PUBLIC __CIODEV_TERM
1375  0000              PUBLIC __CIODEV_PRPCON
1376  0000              PUBLIC __CIODEV_PPPCON
1377  0000              PUBLIC __CIODEV_SIO
1378  0000              PUBLIC __CIODEV_ACIA
1379  0000              PUBLIC __CIODEV_PIO
1380  0000              PUBLIC __CIODEV_UF
1381  0000              PUBLIC __CIODEV_CONSOLE
1382  0000              
1383  0000              PUBLIC __DIODEV_MD
1384  0000              PUBLIC __DIODEV_FD
1385  0000              PUBLIC __DIODEV_RF
1386  0000              PUBLIC __DIODEV_IDE
1387  0000              PUBLIC __DIODEV_ATAPI
1388  0000              PUBLIC __DIODEV_PPIDE
1389  0000              PUBLIC __DIODEV_SD
1390  0000              PUBLIC __DIODEV_PRPSD
1391  0000              PUBLIC __DIODEV_PPPSD
1392  0000              PUBLIC __DIODEV_HDSK
1393  0000              
1394  0000              PUBLIC __VDADEV_VDU
1395  0000              PUBLIC __VDADEV_CVDU
1396  0000              PUBLIC __VDADEV_NEC
1397  0000              PUBLIC __VDADEV_TMS
1398  0000              PUBLIC __VDADEV_VGA
1399  0000              
1400  0000              PUBLIC __EMUTYP_NONE
1401  0000              PUBLIC __EMUTYP_TTY
1402  0000              PUBLIC __EMUTYP_ANSI
1403  0000              
1404  0000              PUBLIC __HB_CURBNK
1405  0000              PUBLIC __HB_INVBNK
1406  0000              PUBLIC __HB_SRCADR
1407  0000              PUBLIC __HB_SRCBNK
1408  0000              PUBLIC __HB_DSTADR
1409  0000              PUBLIC __HB_DSTBNK
1410  0000              PUBLIC __HB_CPYLEN
1411  0000              
1412  0000              PUBLIC __HB_INVOKE
1413  0000              PUBLIC __HB_BNKSEL
1414  0000              PUBLIC __HB_BNKCPY
1415  0000              PUBLIC __HB_BNKCALL
1416  0000              PUBLIC __HB_IDENT
1417  0000              
1418  0000              
1419  0000              
1420  0000              
1421  0000              defc __BF_CIO = 0x00
1422  0000              defc __BF_CIOIN = 0x0
1423  0000              defc __BF_CIOOUT = 0x1
1424  0000              defc __BF_CIOIST = 0x2
1425  0000              defc __BF_CIOOST = 0x3
1426  0000              defc __BF_CIOINIT = 0x4
1427  0000              defc __BF_CIOQUERY = 0x5
1428  0000              defc __BF_CIODEVICE = 0x6
1429  0000              
1430  0000              defc __BF_DIO = 0x10
1431  0000              defc __BF_DIOSTATUS = 0x10
1432  0000              defc __BF_DIORESET = 0x11
1433  0000              defc __BF_DIOSEEK = 0x12
1434  0000              defc __BF_DIOREAD = 0x13
1435  0000              defc __BF_DIOWRITE = 0x14
1436  0000              defc __BF_DIOVERIFY = 0x15
1437  0000              defc __BF_DIOFORMAT = 0x16
1438  0000              defc __BF_DIODEVICE = 0x17
1439  0000              defc __BF_DIOMEDIA = 0x18
1440  0000              defc __BF_DIODEFMED = 0x19
1441  0000              defc __BF_DIOCAP = 0x1a
1442  0000              defc __BF_DIOGEOM = 0x1b
1443  0000              
1444  0000              defc __BF_RTC = 0x20
1445  0000              defc __BF_RTCGETTIM = 0x20
1446  0000              defc __BF_RTCSETTIM = 0x21
1447  0000              defc __BF_RTCGETBYT = 0x22
1448  0000              defc __BF_RTCSETBYT = 0x23
1449  0000              defc __BF_RTCGETBLK = 0x24
1450  0000              defc __BF_RTCSETBLK = 0x25
1451  0000              
1452  0000              defc __BF_EMU = 0x30
1453  0000              
1454  0000              defc __BF_VDA = 0x40
1455  0000              defc __BF_VDAINI = 0x40
1456  0000              defc __BF_VDAQRY = 0x41
1457  0000              defc __BF_VDARES = 0x42
1458  0000              defc __BF_VDADEV = 0x43
1459  0000              defc __BF_VDASCS = 0x44
1460  0000              defc __BF_VDASCP = 0x45
1461  0000              defc __BF_VDASAT = 0x46
1462  0000              defc __BF_VDASCO = 0x47
1463  0000              defc __BF_VDAWRC = 0x48
1464  0000              defc __BF_VDAFIL = 0x49
1465  0000              defc __BF_VDACPY = 0x4a
1466  0000              defc __BF_VDASCR = 0x4b
1467  0000              defc __BF_VDAKST = 0x4c
1468  0000              defc __BF_VDAKFL = 0x4d
1469  0000              defc __BF_VDAKRD = 0x4e
1470  0000              
1471  0000              defc __BF_SYS = 0xF0
1472  0000              defc __BF_SYSRESET = 0xf0
1473  0000              defc __BF_SYSVER = 0xf1
1474  0000              defc __BF_SYSSETBNK = 0xf2
1475  0000              defc __BF_SYSGETBNK = 0xf3
1476  0000              defc __BF_SYSSETCPY = 0xf4
1477  0000              defc __BF_SYSBNKCPY = 0xf5
1478  0000              defc __BF_SYSALLOC = 0xf6
1479  0000              defc __BF_SYSFREE = 0xf7
1480  0000              defc __BF_SYSGET = 0xf8
1481  0000              defc __BF_SYSSET = 0xf9
1482  0000              defc __BF_SYSPEEK = 0xfa
1483  0000              defc __BF_SYSPOKE = 0xfb
1484  0000              defc __BF_SYSINT = 0xfc
1485  0000              
1486  0000              defc __BF_SYSGET_CIOCNT = 0x00
1487  0000              defc __BF_SYSGET_DIOCNT = 0x10
1488  0000              defc __BF_SYSGET_VDACNT = 0x40
1489  0000              defc __BF_SYSGET_TIMER = 0xD0
1490  0000              defc __BF_SYSGET_SECS = 0xD1
1491  0000              defc __BF_SYSGET_BOOTINFO = 0xE0
1492  0000              defc __BF_SYSGET_CPUINFO = 0xF0
1493  0000              defc __BF_SYSGET_MEMINFO = 0xF1
1494  0000              defc __BF_SYSGET_BNKINFO = 0xF2
1495  0000              
1496  0000              defc __BF_SYSSET_TIMER = 0xD0
1497  0000              defc __BF_SYSSET_SECS = 0xD1
1498  0000              defc __BF_SYSSET_BOOTINFO = 0xE0
1499  0000              
1500  0000              defc __BF_SYSINT_INFO = 0x00
1501  0000              defc __BF_SYSINT_GET = 0x10
1502  0000              defc __BF_SYSINT_SET = 0x20
1503  0000              
1504  0000              defc __CIODEV_UART = 0x00
1505  0000              defc __CIODEV_ASCI = 0x10
1506  0000              defc __CIODEV_TERM = 0x20
1507  0000              defc __CIODEV_PRPCON = 0x30
1508  0000              defc __CIODEV_PPPCON = 0x40
1509  0000              defc __CIODEV_SIO = 0x50
1510  0000              defc __CIODEV_ACIA = 0x60
1511  0000              defc __CIODEV_PIO = 0x70
1512  0000              defc __CIODEV_UF = 0x80
1513  0000              defc __CIODEV_CONSOLE = 0xD0
1514  0000              
1515  0000              defc __DIODEV_MD = 0x00
1516  0000              defc __DIODEV_FD = 0x10
1517  0000              defc __DIODEV_RF = 0x20
1518  0000              defc __DIODEV_IDE = 0x30
1519  0000              defc __DIODEV_ATAPI = 0x40
1520  0000              defc __DIODEV_PPIDE = 0x50
1521  0000              defc __DIODEV_SD = 0x60
1522  0000              defc __DIODEV_PRPSD = 0x70
1523  0000              defc __DIODEV_PPPSD = 0x80
1524  0000              defc __DIODEV_HDSK = 0x90
1525  0000              
1526  0000              defc __VDADEV_VDU = 0x00
1527  0000              defc __VDADEV_CVDU = 0x10
1528  0000              defc __VDADEV_NEC = 0x20
1529  0000              defc __VDADEV_TMS = 0x30
1530  0000              defc __VDADEV_VGA = 0x40
1531  0000              
1532  0000              defc __EMUTYP_NONE = 0x00
1533  0000              defc __EMUTYP_TTY = 0x01
1534  0000              defc __EMUTYP_ANSI = 0x02
1535  0000              
1536  0000              defc __HBX_XFCDAT = 0xffe0
1537  0000              defc __HB_CURBNK = 0xffe0
1538  0000              defc __HB_INVBNK = 0xffe1
1539  0000              defc __HB_SRCADR = 0xffe2
1540  0000              defc __HB_SRCBNK = 0xffe4
1541  0000              defc __HB_DSTADR = 0xffe5
1542  0000              defc __HB_DSTBNK = 0xffe7
1543  0000              defc __HB_CPYLEN = 0xffe8
1544  0000              
1545  0000              defc __HBX_XFCFNS = 0xfff0
1546  0000              defc __HB_INVOKE = 0xfff0
1547  0000              defc __HB_BNKSEL = 0xfff3
1548  0000              defc __HB_BNKCPY = 0xfff6
1549  0000              defc __HB_BNKCALL = 0xfff9
1550  0000              defc __HB_IDENT = 0xfffe
1551  0000              
1552  0000              
1553  0000              
1554  0000              
1555  0000              
1556  0000              
1557  0000              
1558  0000              
1559  0000              
1560  0000              PUBLIC __CPM_RCON
1561  0000              PUBLIC __CPM_WCON
1562  0000              PUBLIC __CPM_RRDR
1563  0000              PUBLIC __CPM_WPUN
1564  0000              PUBLIC __CPM_WLST
1565  0000              PUBLIC __CPM_DCIO
1566  0000              PUBLIC __CPM_GIOB
1567  0000              PUBLIC __CPM_SIOB
1568  0000              PUBLIC __CPM_PRST
1569  0000              PUBLIC __CPM_RCOB
1570  0000              PUBLIC __CPM_ICON
1571  0000              PUBLIC __CPM_VERS
1572  0000              PUBLIC __CPM_RDS
1573  0000              PUBLIC __CPM_LGIN
1574  0000              PUBLIC __CPM_OPN
1575  0000              PUBLIC __CPM_CLS
1576  0000              PUBLIC __CPM_FFST
1577  0000              PUBLIC __CPM_FNXT
1578  0000              PUBLIC __CPM_DEL
1579  0000              PUBLIC __CPM_READ
1580  0000              PUBLIC __CPM_WRIT
1581  0000              PUBLIC __CPM_MAKE
1582  0000              PUBLIC __CPM_REN
1583  0000              PUBLIC __CPM_ILOG
1584  0000              PUBLIC __CPM_IDRV
1585  0000              PUBLIC __CPM_SDMA
1586  0000              PUBLIC __CPM_SUID
1587  0000              PUBLIC __CPM_RRAN
1588  0000              PUBLIC __CPM_WRAN
1589  0000              PUBLIC __CPM_CFS
1590  0000              PUBLIC __CPM_DSEG
1591  0000              
1592  0000              
1593  0000              
1594  0000              
1595  0000              defc __CPM_RCON = 1
1596  0000              defc __CPM_WCON = 2
1597  0000              defc __CPM_RRDR = 3
1598  0000              defc __CPM_WPUN = 4
1599  0000              defc __CPM_WLST = 5
1600  0000              defc __CPM_DCIO = 6
1601  0000              defc __CPM_GIOB = 7
1602  0000              defc __CPM_SIOB = 8
1603  0000              defc __CPM_PRST = 9
1604  0000              defc __CPM_RCOB = 10
1605  0000              defc __CPM_ICON = 11
1606  0000              defc __CPM_VERS = 12
1607  0000              defc __CPM_RDS  = 13
1608  0000              defc __CPM_LGIN = 14
1609  0000              defc __CPM_OPN  = 15
1610  0000              defc __CPM_CLS  = 16
1611  0000              defc __CPM_FFST = 17
1612  0000              defc __CPM_FNXT = 18
1613  0000              defc __CPM_DEL  = 19
1614  0000              defc __CPM_READ = 20
1615  0000              defc __CPM_WRIT = 21
1616  0000              defc __CPM_MAKE = 22
1617  0000              defc __CPM_REN  = 23
1618  0000              defc __CPM_ILOG = 24
1619  0000              defc __CPM_IDRV = 25
1620  0000              defc __CPM_SDMA = 26
1621  0000              defc __CPM_SUID = 32
1622  0000              defc __CPM_RRAN = 33
1623  0000              defc __CPM_WRAN = 34
1624  0000              defc __CPM_CFS  = 35
1625  0000              defc __CPM_DSEG = 51
1626  0000              
1627  0000              
1628  0000              
1629  0000              
1630  0000              
1631  0000              
1632  0000              
1633  0000              
1634  0000              
1635  0000              
1636  0000              ENDIF
1637  0000              
1638  0000              
2     0000              EXTERN _main
3     0000              
4     0000              defc STACK_TAIL = 0xF000
5     0000              defc KSTACK_TAIL = 0x10000
6     0000              
7     0000              
8     0000              SECTION code_ca0
9     0000              ORG 0x0000
10    0000              
11    0000                  DEFS (0x00 - ASMPC), 0xFF
12    0000  C3 00 00        jp start
13    0003  FF FF FF FF FF 
                            DEFS (0x08 - ASMPC), 0xFF
14    0008  C3 3B 00        jmp syscall
15    000B  FF FF FF FF FF 
                            DEFS (0x10 - ASMPC), 0xFF
16    0010  C9              ret
17    0011  FF FF FF FF FF FF FF 
                            DEFS (0x18 - ASMPC), 0xFF
18    0018  C9              ret
19    0019  FF FF FF FF FF FF FF 
                            DEFS (0x20 - ASMPC), 0xFF
20    0020  C9              ret
21    0021  FF FF FF FF FF FF FF 
                            DEFS (0x28 - ASMPC), 0xFF
22    0028  C9              ret
23    0029  FF FF FF FF FF FF FF 
                            DEFS (0x30 - ASMPC), 0xFF
24    0030  C9              ret
25    0031  FF FF FF FF FF FF FF 
                            DEFS (0x38 - ASMPC), 0xFF
26    0038  C3 23 00        jmp int0
27    003B              
28    003B  FF FF FF FF FF 
                            DEFS (0x40 - ASMPC), 0xFF
29    0040              vector_table:
30    0040  68 00           DEFW no_vector
31    0042  68 00           DEFW no_vector
32    0044  2F 00           DEFW int_prt0
33    0046  68 00           DEFW no_vector
34    0048  68 00           DEFW no_vector
35    004A  68 00           DEFW no_vector
36    004C  68 00           DEFW no_vector
37    004E  68 00           DEFW no_vector
38    0050  68 00           DEFW no_vector
39    0052              
40    0052  FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF 
                            DEFS (0x66 - ASMPC), 0xFF
41    0066  ED 45           retn
42    0068              
43    0068              
44    0068              no_vector:
45    0068  FB              ei
46    0069  ED 4D           reti
47    006B              
48    006B              
49    006B              SECTION code_crt_init
50    0000              
51    0000              start:
52    0000  F3              di
53    0001  ED 56           im 1
54    0003              
55    0003                  ; Relocate internal registers
56    0003  3E C0           ld a,__IO_BASE_ADDRESS
57    0005  ED 39 3F        out0 (ICR), a
58    0008              
59    0008                  ; Initialize Stack Pointer
60    0008  21 00 00        ld hl,KSTACK_TAIL
61    000B  F9              ld sp, hl
62    000C              
63    000C                  ; Load interrupt vector table location
64    000C              IF vector_table & 0x1F
65    000C                  ERROR "Vector table not aligned at 0x20 boundary"
66    000C              ENDIF
67    000C  3E 40           ld a, +(vector_table & 0xE0)
68    000E  ED 39 F3        out0 (IL), a
69    0011  3E 00           ld a, +((vector_table >> 8) & 0xFF)
70    0013  ED 47           ld i, a
71    0015              
72    0015                  ; Common Area 0 to fill 0x0000-0x0FFF
73    0015                  ; Bank Area to fill 0x1000-0x7FFF
74    0015                  ; Common Area 1 to fill 0x8000-0xFFFF
75    0015                  ; All map directly to physical memory
76    0015  3E 81           ld a,0x81
77    0017  ED 39 FA        out0 (CBAR), a
78    001A              
79    001A                  ; Map Bank Area at 0x1000 to 0x01000
80    001A                  ; Is redundant
81    001A                  ; ld a, #(0x01000 - 0x1000) >> 12
82    001A                  ; out0 (BBR), a
83    001A              
84    001A                  ; Map Common Area 1 at 0x8000 to 0x80000
85    001A  3E 78           ld a, +(0x80000 - 0x8000) >> 12
86    001C  ED 39 F8        out0 (CBR), a
87    001F              
88    001F                  ; Copy 28k from 0x01000 to 0x81000
89    001F  21 00 10        ld hl, 0x1000
90    0022  11 00 90        ld de, 0x9000
91    0025  01 00 70        ld bc, 0x7000
92    0028  ED B0           ldir
93    002A              
94    002A                  ; Map Bank Area at 0x1000 to 0x08000
95    002A  3E 07           ld a, +(0x08000 - 0x1000) >> 12
96    002C  ED 39 F9        out0 (BBR), a
97    002F              
98    002F                  ; Map Common Area 1 at 0x8000 to 0x88000
99    002F  3E 80           ld a, +(0x88000 - 0x8000) >> 12
100   0031  ED 39 F8        out0 (CBR), a
101   0034              
102   0034                  ; Copy 28k from 0x08000 to 0x88000
103   0034  21 00 10        ld hl, 0x1000
104   0037  11 00 80        ld de, 0x8000
105   003A  01 00 70        ld bc, 0x7000
106   003D  ED B0           ldir
107   003F              
108   003F                  ; Common Area 0 to fill 0x0000-0x0FFF
109   003F                  ; Bank Area to fill 0x1000-0xEFFF
110   003F                  ; Common Area 1 to fill 0xF000-0xFFFF
111   003F  3E F1           ld a,0xF1
112   0041  ED 39 FA        out0 (CBAR), a
113   0044              
114   0044                  ; Make BA and CA1 offset to 0x80000
115   0044  3E 80           ld a,0x80000 >> 12
116   0046  ED 39 F9        out0 (BBR), a
117   0049  ED 39 F8        out0 (CBR), a
118   004C              
119   004C              
120   004C              SECTION code_ca0_2
121   0000              
122   0000                  ; Setup current and saved SP values
123   0000  21 00 00        ld hl, KSTACK_TAIL
124   0003  22 00 00        ld (_context_temp_sp), hl
125   0006  21 00 F0        ld hl, STACK_TAIL
126   0009  F9              ld sp, hl
127   000A              
128   000A                  ; Setup saved BBR value
129   000A  3E 80           ld a, 0x80000 >> 12
130   000C  32 02 00        ld (_context_temp_bbr), a
131   000F              
132   000F                  ; Enable Interrupts
133   000F  FB              ei
134   0010              
135   0010                  ; Call main:
136   0010                  ; char *args[1] = { NULL };
137   0010                  ; io_led_output = main(0, &args);
138   0010  11 E1 00        ld de, argv
139   0013  D5              push de
140   0014  11 00 00        ld de,0
141   0017  D5              push de
142   0018  CD 00 00        call _main
143   001B  D1              pop de
144   001C  D1              pop de
145   001D  ED 29 0D        out0 (__IO_LED_OUTPUT), l
146   0020              
147   0020                  ; Halt forever
148   0020              halt_loop:
149   0020  76              halt
150   0021  18 FD           jr halt_loop
151   0023              
152   0023              
153   0023              EXTERN _int0
154   0023              
155   0023              int0:
156   0023  CD 95 00        call context_save
157   0026  CD 00 00        call _int0
158   0029  CD BB 00        call context_restore
159   002C  FB              ei
160   002D  ED 4D           reti
161   002F              
162   002F              
163   002F              EXTERN _int_prt0
164   002F              
165   002F              int_prt0:
166   002F  CD 95 00        call context_save
167   0032  CD 00 00        call _int_prt0
168   0035  CD BB 00        call context_restore
169   0038  FB              ei
170   0039  ED 4D           reti
171   003B              
172   003B              
173   003B              syscall:
174   003B                  ; Load A * 2 to HL
175   003B  AC              xor h
176   003C  CB 27           sla a
177   003E  CB 14           rl h
178   0040  6F              ld l, a
179   0041              
180   0041                  ; Add syscall_table to HL
181   0041  D5 11 E3 00 19 D1 
                            add hl, syscall_table
182   0047              
183   0047                  ; Load function address to HL
184   0047  5E              ld e, (hl)
185   0048  23              inc hl
186   0049  56              ld d, (hl)
187   004A  62 6B           ld hl, de
188   004C              
189   004C                  ; Return with error if HL is 0x0000
190   004C  3E 00           ld a, 0
191   004E  B5              or l
192   004F  B4              or h
193   0050  CA 54 00        jp z, syscall_bad
194   0053              
195   0053                  ; Tail-call function in HL
196   0053  E9              jp (hl)
197   0054              
198   0054              syscall_bad:
199   0054  21 FF FF        ld hl, 0xFFFF
200   0057  C9              ret
201   0058              
202   0058              
203   0058              PUBLIC _context_init
204   0058              PUBLIC context_init
205   0058              
206   0058              ; void context_init(void (*pc)());
207   0058              _context_init:
208   0058              context_init:
209   0058                  ; Copy pc argument to DE
210   0058  E1              pop hl
211   0059  D1              pop de
212   005A  D5              push de
213   005B  E5              push hl
214   005C                  ; Swap _context_temp_sp and SP using HL
215   005C  2A 00 00        ld hl, (_context_temp_sp)
216   005F  ED 73 00 00     ld (_context_temp_sp), sp
217   0063  F9              ld sp, hl
218   0064                  ; Swap _context_temp_bbr and BBR
219   0064  3A 02 00        ld a, (_context_temp_bbr)
220   0067  ED 00 F9        in0 b, (BBR)
221   006A  ED 39 F9        out0 (BBR), a
222   006D  78              ld a, b
223   006E  32 02 00        ld (_context_temp_bbr), a
224   0071                  ; Clear HL
225   0071  21 00 00        ld hl, 0
226   0074                  ; Push return address
227   0074  D5              push de
228   0075                  ; Push IX
229   0075  E5              push hl
230   0076                  ; Push AF, AF'
231   0076  E5              push hl
232   0077  E5              push hl
233   0078                  ; Push BC, DE, HL
234   0078  E5              push hl
235   0079  E5              push hl
236   007A  E5              push hl
237   007B                  ; Push BC', DE', HL'
238   007B  E5              push hl
239   007C  E5              push hl
240   007D  E5              push hl
241   007E                  ; Push IY
242   007E  E5              push hl
243   007F                  ; Swap _context_temp_bbr and BBR
244   007F  3A 02 00        ld a, (_context_temp_bbr)
245   0082  ED 00 F9        in0 b, (BBR)
246   0085  ED 39 F9        out0 (BBR), a
247   0088  78              ld a, b
248   0089  32 02 00        ld (_context_temp_bbr), a
249   008C                  ; Swap _context_temp_sp and SP using HL
250   008C  2A 00 00        ld hl, (_context_temp_sp)
251   008F  ED 73 00 00     ld (_context_temp_sp), sp
252   0093  F9              ld sp, hl
253   0094                  ; Return
254   0094  C9              ret
255   0095              
256   0095              
257   0095              PUBLIC context_save
258   0095              
259   0095              context_save:
260   0095                  ; Pop return address to IX while pushing IX
261   0095  DD E3           ex (sp), ix
262   0097                  ; Push AF, AF'
263   0097  F5              push af
264   0098  08              ex af,af'
265   0099  F5              push af
266   009A                  ; Push BC, DE, HL
267   009A  C5              push bc
268   009B  D5              push de
269   009C  E5              push hl
270   009D                  ; Push BC', DE', HL'
271   009D  D9              exx
272   009E  C5              push bc
273   009F  D5              push de
274   00A0  E5              push hl
275   00A1                  ; Push IY
276   00A1  FD E5           push iy
277   00A3                  ; Swap _context_temp_bbr and BBR
278   00A3  3A 02 00        ld a, (_context_temp_bbr)
279   00A6  ED 00 F9        in0 b, (BBR)
280   00A9  ED 39 F9        out0 (BBR), a
281   00AC  78              ld a, b
282   00AD  32 02 00        ld (_context_temp_bbr), a
283   00B0                  ; Swap _context_temp_sp and SP using HL
284   00B0  2A 00 00        ld hl, (_context_temp_sp)
285   00B3  ED 73 00 00     ld (_context_temp_sp), sp
286   00B7  F9              ld sp, hl
287   00B8                  ; Push return address from IX
288   00B8  DD E5           push ix
289   00BA                  ; Return
290   00BA  C9              ret
291   00BB              
292   00BB              
293   00BB              PUBLIC context_restore
294   00BB              
295   00BB              context_restore:
296   00BB                  ; Pop return address to IX
297   00BB  DD E1           pop ix
298   00BD                  ; Swap _context_temp_sp and SP using HL
299   00BD  2A 00 00        ld hl, (_context_temp_sp)
300   00C0  ED 73 00 00     ld (_context_temp_sp), sp
301   00C4  F9              ld sp, hl
302   00C5                  ; Swap _context_temp_bbr and BBR
303   00C5  3A 02 00        ld a, (_context_temp_bbr)
304   00C8  ED 00 F9        in0 b, (BBR)
305   00CB  ED 39 F9        out0 (BBR), a
306   00CE  78              ld a, b
307   00CF  32 02 00        ld (_context_temp_bbr), a
308   00D2                  ; Pop IY
309   00D2  FD E1           pop iy
310   00D4                  ; Pop HL', DE', BC'
311   00D4  E1              pop hl
312   00D5  D1              pop de
313   00D6  C1              pop bc
314   00D7  D9              exx
315   00D8                  ; Pop HL, DE, BC
316   00D8  E1              pop hl
317   00D9  D1              pop de
318   00DA  C1              pop bc
319   00DB                  ; Pop AF', AF
320   00DB  F1              pop af
321   00DC  08              ex af,af'
322   00DD  F1              pop af
323   00DE                  ; Push return address while popping to IX
324   00DE  DD E3           ex (sp),ix
325   00E0                  ; Return
326   00E0  C9              ret
327   00E1              
328   00E1              
329   00E1              argv:
330   00E1  00 00           DEFW 0
331   00E3              
332   00E3              
333   00E3              EXTERN _syscall_0
334   00E3              
335   00E3              syscall_table:
336   00E3  00 00           DEFW _syscall_0
337   00E5  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      0105  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      0125  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      0145  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      0165  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      0185  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      01A5  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      01C5  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      01E5  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      0205  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      0225  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      0245  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      0265  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      0285  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      02A5  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      02C5  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
                            DEFS (256 - (ASMPC - syscall_table)) * 2, 0x00
338   02E1              
339   02E1              SECTION code_ca1
340   0000              ORG 0xE000
341   0000              
342   0000              PUBLIC _context_temp_sp, _context_temp_bbr
343   0000              
344   0000              _context_temp_sp:
345   0000  00 00           DEFW 0
346   0002              _context_temp_bbr:
347   0002  00              DEFB 0
348   0003              
349   0003              
350   0003              SECTION code_ba
351   0000              ORG 0x1000
352   0000              
353   0000              SECTION bss_compiler
354   0000              
